<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.cykj.admin.mapper.TimeMapper">

    <!--  查询所有发车时刻 -->
    <select id="queryTime" resultType="com.cykj.pojo.TimesInfo" parameterType="java.lang.Integer">
        select t.id,t.time,b.number,b.id busId,l.start_time+l.return_time+p.value requiredTime
        from tb_time t
            left join tb_bus_work bw on t.id = bw.time_id and bw.start_begin_or_return = #{beginOrReturn}
            left join tb_bus b on bw.bus_id = b.id
            left join tb_line l on bw.line_id = l.id
            left join tb_param p on p.type_english = 'arriveSiteRest'
        order by id
    </select>
</mapper>